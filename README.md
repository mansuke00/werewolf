# MANSUKE WEREWOLF (人狼ゲーム進行アプリ)
**MANSUKE WEREWOLF**は、ブラウザで動作する人狼ゲームの進行アプリです。
対面でもオンラインでもスムーズにゲームを進行できるゲームマスター（GM）機能を提供します。

## 開発者
Hiraku Matsuo, Eishin Nobuyama, Ren Uehara, Gemini 3

## 注意
部屋を作成できるのは、**管理者用パスコードを知っている開発者本人のみ**になります。
全ての方が部屋を作成できるようにするか迷ったのですが、以下に記載している通りGoogle Geminiと連携している機能があるので、できるだけお金がかからないようにした苦渋の決断です。

## ゲーム概要
プレイヤーは「市民陣営」「人狼陣営」「第三陣営（Ver 1.0では妖狐のみ実装）」に分かれ、それぞれの勝利条件を目指して議論と推理を行います。
本アプリはゲーム進行、役職の配布、能力の処理、勝敗判定をすべて自動化しており、GMなしでプレイ可能です。

### 特徴
* Firebase Firestoreで、リアルタイムのチャットやアクションに対応しています。
* 視覚的な演出を多く用意しています！見やすくてモダンなデザインを目指しました。
* 待機時間やカモフラージュ用に、Google Gemini APIを活用したチャットボット希望を搭載しています。
* オンラインプレイはもちろん、デバイスを持ち寄って遊ぶ「対面モード」もサポートしています。

## 役職一覧
本ゲームには以下の役職が登場します。

| 役職名 | 陣営 | 説明 | 
 | ----- | ----- | ----- | 
| **市民** | 市民 | 特殊能力はありません。推理と議論で人狼を探します。 | 
| **占い師** | 市民 | 毎晩1人を占い、「人狼」か「人狼ではない」かを知ることができます。 | 
| **霊媒師** | 市民 | 昼に処刑された人が、「人狼だった」か「人狼ではなかった」かを知ることができます。 | 
| **騎士** | 市民 | 毎晩1人を人狼の襲撃から守ります。自分を守ることはできず、2夜連続で同じ人を守ることもできません。 | 
| **罠師** | 市民 | 騎士の能力に加え、護衛した先が襲撃されると、襲撃してきた人狼を返り討ちにして死亡させます。 | 
| **賢者** | 市民 | 毎晩1人を占い、その人の正確な役職名を知ることができます。 | 
| **人狼キラー** | 市民 | 人狼に襲撃されると死亡しますが、襲撃してきた人狼1人を道連れにします。 | 
| **名探偵** | 市民 | 誰かが死亡した日の夜に、その死因や正体に関する情報を知ることができます。 | 
| **呪われし者** | 市民 | 最初は市民としてカウントされますが、人狼に襲撃されると死亡せず、人狼陣営に覚醒します。 | 
| **長老** | 市民 | 人狼の襲撃を1度だけ耐えることができます。 | 
| **人狼** | 人狼 | 夜に仲間と相談して市民1人を襲撃します。 | 
| **大狼** | 人狼 | 占われても「人狼ではない」と判定される、強力な人狼です。 | 
| **狂人** | 人狼 | 人狼の味方をする人間です。特殊能力はありませんが、嘘をついて場を混乱させます。 | 
| **妖狐** | 第三 | 人狼に襲撃されても死にませんが、占われると呪い殺されます。最後まで生き残れば単独勝利です。 | 

## ゲーム進行ロジック
ゲームは以下のフェーズ順に進行します。

1. **ロビー**
   * プレイヤーが集まり、ホストが配役設定やルール（匿名投票、対面モードなど）を決定します。
   * 参加人数と配役数が一致すると開始可能です。試合開始前から勝敗が決まっていないかも簡易的にチェックします。

2. **カウントダウン&役職確認**
   * 自分の役職を確認する時間です。一部の同じ能力者同士には仲間が表示されます。

3. **昼フェーズ**
   * 制限時間内に議論を行います。
   * 全員が「投票準備完了」を押すと時間を短縮して投票へ移行します。
   * 生存者確認や役職分配も確認できます。
   * ゲームログで、過去の記録も辿ることができます。

4. **投票フェーズ**
   * 追放したいプレイヤーに投票します。
   * 最多得票者が処刑されます。同数またはスキップ多数の場合は処刑なしとなります。

5. **夜フェーズ**
   * 能力者が行動を選択します（襲撃、占い、護衛など）。
   * 共有能力を持つ役職は、専用の役職チャットで相談が可能です。
   * 全員の行動が完了すると翌朝へ進みます。

6. **結果判定**
   * 毎朝、死亡者が発表されます。
   * 勝利条件を満たした場合、ゲーム終了となり結果画面へ遷移します。

## 開発者向け情報
### 技術スタック
* **Frontend**: React (Vite)
* **Styling**: Tailwind CSS
* **Backend / Database**: Firebase (Firestore, Authentication, Cloud Functions)
* **Icons**: Lucide React
* **AI**: Google Gemini API (via Vertex AI or Gemini Developer API)

### ディレクトリ構造
src/ ├── components/ # 再利用可能なUIコンポーネント │ ├── game/ # ゲーム進行に特化したコンポーネント (ChatPanel, RoleCardなど) │ └── ui/ # 汎用UIパーツ (Modal, Notificationなど) ├── config/ # Firebaseの初期化設定 ├── constants/ # 定数定義 (役職データ、タイムアウト時間など) ├── screens/ # 各画面のメインコンポーネント │ ├── HomeScreen.jsx # トップ画面 │ ├── LobbyScreen.jsx # 待機部屋 │ ├── GameScreen.jsx # ゲームプレイ画面 │ └── ResultScreen.jsx # 結果画面 ├── utils/ # ヘルパー関数 └── App.jsx # ルーティングと全体の状態管理 functions/ # Firebase Cloud Functions (サーバーサイドロジック) └── index.js # ゲーム進行、夜の行動処理、勝敗判定などのコアロジック

## ライセンス
Copyright (c) Hiraku Matsuo & Cerinal Japan. All Rights Reserved.
このソフトウェアは、私的利用 に限り使用が許可されています。
著作者の許可なく、商用利用・再配布・改変・それらに該当すると判断した行為は固く禁止されています。
